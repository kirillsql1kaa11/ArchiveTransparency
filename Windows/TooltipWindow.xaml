<Window x:Class="ArchiveTransparency.Windows.TooltipWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        ShowInTaskbar="False"
        ShowActivated="False"
        SizeToContent="WidthAndHeight"
        MaxWidth="420"
        MaxHeight="480"
        ResizeMode="NoResize"
        Visibility="Hidden">
    <Border CornerRadius="10" Background="#E6181825" BorderBrush="#44475A" BorderThickness="1" Padding="14">
        <Border.Effect>
            <DropShadowEffect BlurRadius="24" ShadowDepth="4" Opacity="0.55" Color="#000000"/>
        </Border.Effect>
        <Grid MinWidth="200">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header: archive name -->
            <TextBlock x:Name="ArchiveNameText" Grid.Row="0"
                       FontFamily="Segoe UI Semibold" FontSize="13"
                       Foreground="#CDD6F4" Margin="0,0,0,8"
                       TextTrimming="CharacterEllipsis"/>

            <!-- Separator -->
            <Border Grid.Row="1" Height="1" Margin="0,0,0,8">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                        <GradientStop Color="#44475A" Offset="0"/>
                        <GradientStop Color="#89B4FA" Offset="0.5"/>
                        <GradientStop Color="#44475A" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
            </Border>

            <!-- File list -->
            <ScrollViewer Grid.Row="2" MaxHeight="360"
                          VerticalScrollBarVisibility="Auto"
                          HorizontalScrollBarVisibility="Disabled">
                <ItemsControl x:Name="FileList">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Grid Margin="0,1.5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="{Binding Icon}"
                                           FontSize="12" Margin="0,0,6,0"
                                           VerticalAlignment="Center"/>
                                <TextBlock Grid.Column="1" Text="{Binding DisplayName}"
                                           FontFamily="Segoe UI" FontSize="12"
                                           Foreground="#BAC2DE"
                                           TextTrimming="CharacterEllipsis"
                                           VerticalAlignment="Center"
                                           ToolTip="{Binding DisplayPath}"/>
                                <TextBlock Grid.Column="2" Text="{Binding DisplaySize}"
                                           FontFamily="Segoe UI" FontSize="11"
                                           Foreground="#6C7086" Margin="14,0,0,0"
                                           VerticalAlignment="Center"/>
                            </Grid>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>

            <!-- Loading -->
            <StackPanel x:Name="LoadingPanel" Grid.Row="2" Visibility="Collapsed"
                        HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,12">
                <TextBlock Text="⏳ Загрузка..."
                           FontFamily="Segoe UI" FontSize="12"
                           Foreground="#6C7086" HorizontalAlignment="Center"/>
            </StackPanel>

            <!-- Footer -->
            <TextBlock x:Name="FooterText" Grid.Row="3"
                       Visibility="Collapsed"
                       FontFamily="Segoe UI" FontSize="11"
                       Foreground="#585B70" Margin="0,6,0,0"/>
        </Grid>
    </Border>
</Window>
